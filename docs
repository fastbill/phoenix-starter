#!/usr/bin/env bash
#
# Documentation helper script using phoenix-docs Docker image
# Usage: ./docs [command]
#
# Commands:
#   init    Initialize docs/ folder with templates
#   serve   Start dev server with hot reload (http://localhost:4321)
#   build   Build static site to docs-dist/
#   help    Show this help message
#

set -e

DOCKER_IMAGE="ghcr.io/fastbill/phoenix-docs:latest"

case "${1:-help}" in
  init)
    docker run --rm -v "$(pwd):/project" "$DOCKER_IMAGE" init
    ;;
  serve)
    docker run --rm -v "$(pwd):/project" -p 4321:4321 "$DOCKER_IMAGE" serve
    ;;
  build)
    docker run --rm -v "$(pwd):/project" "$DOCKER_IMAGE" build
    ;;
  help|--help|-h|"")
    echo "Documentation helper script"
    echo ""
    echo "Usage: ./docs [command]"
    echo ""
    echo "Commands:"
    echo "  init    Initialize docs/ folder with templates"
    echo "  serve   Start dev server with hot reload (http://localhost:4321)"
    echo "  build   Build static site to docs-dist/"
    echo "  help    Show this help message"
    ;;
  *)
    echo "Unknown command: $1"
    echo "Run './docs help' for usage"
    exit 1
    ;;
esac
